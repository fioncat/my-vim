# vimæ—¥è®°

ä½œä¸ºä¸€åGolangå¼€å‘è€…ï¼Œä½¿ç”¨è¿‡å„ç§ç¼–è¾‘å™¨/IDEï¼Œå…¶ä¸­åŒ…æ‹¬ï¼š

- GoLandï¼šå•¥ä¹Ÿä¸è¯´äº†ï¼Œåšè¿‡Javaçš„åº”è¯¥å¯¹jetbrainsçš„IDEæœ‰æ·±æ·±çš„æƒ…æ„Ÿã€‚GoLandæœ‰JetBrainså®¶IDEçš„æ‰€æœ‰ç‰¹è‰²ï¼Œå®ƒä¸ä½¿ç”¨goplsè€Œæ˜¯ç”¨è‡ªå·±çš„language serverï¼Œå› æ­¤å¾ˆå¿«é€Ÿï¼Œå¹¶ä¸”æœ‰ç€ä¸€å¥—å¼‚å¸¸å¼ºå¤§çš„å·¥å…·é›†ï¼Œè°ƒè¯•ä»£ç éå¸¸æ–¹ä¾¿ã€‚å”¯ä¸€çš„é—®é¢˜å°±æ˜¯å®ƒä¸æ˜¯å…è´¹çš„ã€‚
- VsCodeï¼šç›®å‰æœ€å¥½ç”¨çš„å¼€æºç¼–è¾‘å™¨ä¹‹ä¸€ï¼Œè¿‘å‡ å¹´æœ‰èµ¶è¶…SublimeTextçš„è¶‹åŠ¿ã€‚æ’ä»¶åº“å¼‚å¸¸åºå¤§ï¼Œå¯ä»¥ç”¨æ— æ•°æ’ä»¶å †ç Œæˆä¸€ä¸ªIDEï¼Œç›®å‰æˆ‘åŒäº‹æœ€å¤šçš„é€‰æ‹©ã€‚ç¼ºç‚¹å°±æ˜¯åœ¨ä½¿ç”¨å¤§é¡¹ç›®å¹¶ä¸”æ’ä»¶è¾ƒå¤šæ—¶ä¼šæ¯”è¾ƒå¡ã€‚
- Emacsï¼šè€ç‰Œç¼–è¾‘å™¨ã€‚å› ä¸ºä¸ä¹ æƒ¯Emcas-modeï¼Œæ‰€ä»¥æˆ‘ç”¨çš„æ˜¯Spacemacsçš„vim-modeã€‚æ˜¯æˆ‘åœ¨ç”¨vimä¹‹å‰ç”¨çš„æœ€å¤šçš„ç¼–è¾‘å™¨ã€‚

æ¯”èµ·ä¼ ç»Ÿçš„ç¼–è¾‘æ¨¡å¼ï¼Œvim-modeçš„ç¼–è¾‘å’Œæ–‡æœ¬å¤„ç†æ•ˆç‡æ˜¯è¦é«˜ä¸Šä¸å°‘çš„ï¼Œå› æ­¤ä¸Šé¢çš„æ‰€æœ‰ç¼–è¾‘å™¨æˆ‘æ— ä¸€ä¾‹å¤–éƒ½ä¼šä½¿ç”¨vimæ’ä»¶ã€‚ä½†æ˜¯æ¯”èµ·GoLandå’ŒVsCodeï¼Œæˆ‘è¿˜æ˜¯å–œæ¬¢çº¯Vimï¼ŒEmcasè¿™æ ·çš„ç»ˆç«¯ç¼–è¾‘å™¨ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥è®©æˆ‘éšæ—¶å¿«é€Ÿåœ°ç¼–è¾‘æ–‡ä»¶å’Œè¾“å…¥å‘½ä»¤ï¼Œå¹¶ä¸”å¯ä»¥åœ¨è¯¸å¦‚æœåŠ¡å™¨çš„æ— GUIç¯å¢ƒè¿è¡Œã€‚

å…¶ä¸­ï¼Œæˆ‘å¾ˆå–œæ¬¢Spacemacsçš„å¿«æ·é”®æ¨¡å¼ï¼Œä½¿ç”¨ç©ºæ ¼(SPC)ä½œä¸ºleaderé”®ï¼Œå¿«æ·é”®é‡‡ç”¨å®¹æ˜“è®°å¿†çš„ç®€å†™æ–¹å¼é…ç½®ï¼Œä¾‹å¦‚æŸ¥çœ‹Git Blameä½¿ç”¨SPC g bå¿«æ·é”®ã€‚æˆ‘å°†è¿™ç§å¿«æ·é”®é…ç½®ä¹ æƒ¯åŠ åˆ°äº†vimä¸­ã€‚

æˆ‘æ”¾å¼ƒSpacemacsçš„åŸå› æ˜¯ï¼Œå®ƒçš„åŠ è½½é€Ÿåº¦å¤ªæ…¢äº†ï¼Œæ¯æ¬¡å¯åŠ¨éœ€è¦åŠ è½½200å¤šä¸ªlayersï¼Œå¹¶ä¸”æˆ‘ä¸æ˜¯å¾ˆä¹ æƒ¯Emacs-Lispï¼Œç›¸æ¯”äºå®ƒï¼Œæˆ‘è®¤ä¸ºvim-scriptè¦äººæ€§åŒ–å¤ªå¤šã€‚

å› æ­¤æˆ‘æœ€ç»ˆé€‰æ‹©äº†çº¯vimä½œä¸ºæˆ‘çš„ç”Ÿäº§å·¥å…·ã€‚ä¸‹é¢æ˜¯æœ€ç»ˆæ•ˆæœå›¾ï¼š

![vim-1](vim1.png)

![vim-2](vim2.png)

è‡ªä»vim8å¼•å…¥å¼‚æ­¥ç­‰featuresä¹‹åï¼Œé…åˆautoloadï¼Œé€Ÿåº¦è¿˜æ˜¯å¾ˆä¸é”™çš„ï¼Œæ‰€ä»¥æˆ‘æ²¡æœ‰å»ç”¨Neovimã€‚å¦‚æœä½ ç”¨çš„æ˜¯vim8ä»¥ä¸‹çš„ç‰ˆæœ¬ï¼Œé‚£ä¹ˆæ›´åº”è¯¥å»ä½¿ç”¨nvimè€Œä¸æ˜¯vimã€‚

ä»¥ä¸‹æ˜¯æˆ‘ä½¿ç”¨çš„æ‰€æœ‰æ’ä»¶åˆ—è¡¨ï¼š

| æ’ä»¶            | ç”¨é€”                                                         | è‡ªå®šä¹‰å¿«æ·é”®                                                 |
| --------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| fzf             | æœç´¢æ’ä»¶<br>å¯ä»¥ä»£æ›¿ctrlpæ’ä»¶è¿›è¡Œæ–‡ä»¶æœç´¢<br>è‡ªå¸¦äº†ACKå‘½ä»¤ç”¨äºå†…å®¹æœç´¢<br>å¹¶ä¸”æ”¯æŒè¯¸å¦‚Gitæœç´¢ç­‰å„ç§å¼ºå¤§åŠŸèƒ½ | æ–‡ä»¶æœç´¢ï¼šSPC s f<br>ACKæœç´¢ï¼šSPC s g<br>è¡Œæœç´¢ï¼šSPC s s<br>bufferæœç´¢ï¼šSPC s b |
| nerdtree        | vimå¿…è£…çš„æ–‡ä»¶æ ‘æ’ä»¶                                          | æ‰“å¼€/å…³é—­æ–‡ä»¶æ ‘ï¼šSPC t t<br>åœ¨æ–‡ä»¶æ ‘æ‰“å¼€å½“å‰æ–‡ä»¶ï¼šSPC f f    |
| airline         | æ¼‚äº®çš„vimçŠ¶æ€æ                                               | æ—                                                            |
| auto-pairs      | è‡ªåŠ¨è¡¥å…¨æ‹¬å·                                                 | æ—                                                            |
| tagbar          | æ˜¾ç¤ºä»£ç ç»“æ„ï¼Œéœ€è¦ctagsæ”¯æŒ                                  | æ‰“å¼€tagbarï¼šSPC t b                                          |
| easy-align      | è‡ªåŠ¨å¯¹é½                                                     | æ—                                                            |
| nerdcommenter   | å¿«é€Ÿæ³¨é‡Š/å–æ¶ˆæ³¨é‡Šæ’ä»¶<br>å¯ä»¥åœ¨visualæ¨¡å¼é€‰ä¸­å¤šè¡Œè¿›è¡Œæ³¨é‡Š    | æ³¨é‡Š/å–æ¶ˆæ³¨é‡Šï¼šSPC c i                                       |
| coc.nvim        | è¶…å¥½ç”¨çš„è¡¥å…¨æ’ä»¶<br>éœ€è¦node.jsçš„æ”¯æŒ<br>æ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„æ’ä»¶åº“<br>ä½¿ç”¨æ¯”YouCompleteMeæ–¹ä¾¿å¾ˆå¤š | ä»£ç è·³è½¬ï¼šg d<br>æ˜¾ç¤ºå˜é‡å¼•ç”¨ï¼šg r<br>æ˜¾ç¤ºæ–‡æ¡£ï¼šK<br>æ‰¹é‡ä¿®æ”¹å˜é‡åï¼šSPC r n<br>é€‰ä¸­ä»£ç æ ¼å¼åŒ–ï¼šSPC f |
| vim-minigo      | æˆ‘è‡ªå·±å†™çš„æ’ä»¶ğŸ˜€<br>åŸºäº[vim-go](https://github.com/fatih/vim-go)çš„miniç‰ˆ<br>åˆ é™¤å’Œcocé‡å¤çš„åŠŸèƒ½<br>åˆ é™¤goplsï¼Œé˜²æ­¢å’Œcocä¸€èµ·æ—¶å¯åŠ¨å¤šä¸ªgopls<br>ä¿ç•™cocæ²¡æœ‰çš„goå·¥å…·é›† | å¢åŠ Tagï¼šg a t<br>åˆ é™¤Tagï¼šg r t<br>æ‰§è¡Œgoimportsï¼šg i<br>æ‰§è¡Œfillstructï¼šg f s<br>å¾…è¡¥å……æ›´å¤š... |
| vim-fugitive    | vim Gitæ”¯æŒ<br>æ”¯æŒå„ç§Gitå‘½ä»¤                               | æ˜¾ç¤ºGit Blameï¼šSPC g b                                       |
| vim-markdown    | Markdownæ”¯æŒ                                                 | æ—                                                            |
| vim-bufclean    | æˆ‘è‡ªå·±å†™çš„æ’ä»¶ğŸ˜€<br>å¿«é€Ÿåˆ é™¤é‚£äº›éæ´»è·ƒçš„buffer                | æ¸…ç†bufferï¼šSPC b c                                          |
| ale             | ä»£ç æ£€æŸ¥æ’ä»¶<br>å¿«é€Ÿæ£€æŸ¥errorå’Œwarning<br>å’Œairlineè”åŠ¨åœ¨çŠ¶æ€æ æ˜¾ç¤ºé”™è¯¯æ•°é‡ | ä¸‹ä¸€ä¸ªé”™è¯¯ï¼šSPC e n<br>ä¸Šä¸€ä¸ªé”™è¯¯ï¼šSPC e p<br>ä¸‹ä¸€ä¸ªwarningï¼šSPC  w n<br>ä¸Šä¸€ä¸ªwarningï¼šSPC  w p<br>æ˜¾ç¤ºé”™è¯¯åˆ—è¡¨ï¼šSPC e e<br>å…³é—­é”™è¯¯åˆ—è¡¨ï¼šSPC e q |
| vim-signature   | åœ¨çŠ¶æ€è¡Œæ˜¾ç¤ºmarks                                            | æ—                                                            |
| vim-oceanicnext | æˆ‘è‡ªå·±å†™çš„æ’ä»¶ğŸ˜€<br/>ä¸€ä¸ªå¥½çœ‹çš„ä¸»é¢˜<br>åŸºäº[oceanic-next](https://github.com/mhartington/oceanic-next)çš„æ”¹è¿›ç‰ˆ<br>åŠ å…¥äº†ALEæ”¯æŒï¼Œä¼˜åŒ–äº†ä¸€äº›ç»†èŠ‚ | æ—                                                            |

ä»¥åŠä¸€äº›é…ç½®çš„å…¶å®ƒåŸºç¡€å¿«æ·é”®ï¼š

| æ“ä½œ                           | å¿«æ·é”®             |
| ------------------------------ | ------------------ |
| æ‰“å¼€å†…ç½®ç»ˆç«¯                   | SPC '              |
| åœ¨Visualä¸‹å¤åˆ¶å†…å®¹åˆ°ç³»ç»Ÿå‰ªåˆ‡æ¿ | SPC y y            |
| åœ¨Visualä¸‹å‰ªåˆ‡å†…å®¹åˆ°ç³»ç»Ÿå‰ªåˆ‡æ¿ | SPC x x            |
| å¿«é€Ÿå‘¼å‡ºå¸®åŠ©æ–‡æ¡£               | SPC h              |
| å‚ç›´åˆ†å±                       | SPC w /            |
| æ°´å¹³åˆ†å±                       | SPC w -            |
| è·³è½¬å‚ç›´åˆ†å±å°ºå¯¸               | SPC w ]<br>SPC w [ |

æ‰€æœ‰æ’ä»¶çš„è¯¦ç»†é…ç½®ä¼šåœ¨ä¸‹é¢ç»™å‡ºã€‚

## åŸºç¡€é…ç½®

ä»¥ä¸‹æ˜¯ä¸€äº›åŸºæœ¬çš„é…ç½®ã€‚

```vim-script
" å…³é—­å…¼å®¹æ¨¡å¼
set nocompatible

" è®©é€€æ ¼ç¬¦åœ¨æ’å…¥æ¨¡å¼ä¸‹èƒ½å¤Ÿåˆ é™¤å‰ä¸€ä¸ªå­—ç¬¦ï¼Œå°±åƒä¸€èˆ¬çš„ç¼–è¾‘å™¨é‚£æ ·
set backspace=indent,eol,start

" utf-8ç¼–ç ï¼Œåœ¨ä¸€äº›æ’ä»¶ä¸‹è¦æ±‚è¿™ä¸ªé…ç½®
set encoding=UTF-8

" æ˜¾ç¤ºç›¸å¯¹è¡Œå·
set number relativenumber

" çªå‡ºæ˜¾ç¤ºå½“å‰è¡Œ
set cursorline

" çªå‡ºæ˜¾ç¤ºæœç´¢åŒ¹é…é¡¹
set showmatch

" tabç›¸å…³é…ç½® - tabå ç”¨4spaces
set ts=4
set shiftwidth=4
" è‡ªåŠ¨å¯¹é½
set autoindent

" vsåˆ†å±æ—¶é»˜è®¤åœ¨å³è¾¹æ‰“å¼€
set splitright

" å®æ—¶æœç´¢ï¼Œä¸å¿…ç­‰æŒ‰ä¸‹<Enter>å†è¿›è¡Œæœç´¢
set incsearch

" æœç´¢å¿½ç•¥å¤§å°å†™
set ignorecase

" ä¸å…è®¸ç”Ÿæˆswpæ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶ç”¨äºå¼‚å¸¸ä¸­æ–­æ—¶çš„æ¢å¤
" å¦‚æœéœ€è¦è¿™ä¸ªåŠŸèƒ½ï¼Œæ³¨é‡Šæ‰è¿™ä¸ªé…ç½®å³å¯
set noswapfile

" å¯åŠ¨è¯­æ³•é«˜äº®
syntax enable

" Ctrl-A è·³è½¬åˆ°å½“å‰è¡Œé¦–ï¼Œå°±åƒEmacsé‚£æ ·
nnoremap <C-a> ^

" :wå‘½ä»¤æ—¶å¸¸ä¼šè¯¯è¾“å…¥ä¸º:Wï¼Œå› æ­¤è¿™é‡Œåšä¸€ä¸ªæ˜ å°„
cnoreabbrev W w

" ä½¿ç”¨markæŠ˜å ï¼ŒæŠ˜å åŠŸèƒ½æˆ‘ä¸€èˆ¬åœ¨é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨
" å¦‚æœéœ€è¦æ›´åŠ å¼ºå¤§çš„æŠ˜å ï¼Œå¯ä»¥å®‰è£…æ’ä»¶
set foldmethod=marker
```

## å¿«æ·é”®åŸºç¡€é…ç½®

ä»¥ä¸‹å¿«æ·é”®ä¸ä¾èµ–ä»»ä½•æ’ä»¶ï¼Œæ‰€ä»¥æˆ‘å•ç‹¬æ‹¿å‡ºæ¥è¿›è¡Œé…ç½®ï¼š

```vim-script
" SPC(Space)ä½œä¸ºLeaderï¼Œå°±åƒSpacemacsé»˜è®¤é‚£æ ·
let mapleader=" "

" æ‰“å¼€å†…ç½®ç»ˆç«¯
nnoremap <leader>' :vert ter<CR>

" å°†åœ¨Visual Modeä¸‹é€‰ä¸­çš„å†…å®¹å¤åˆ¶åˆ°ç³»ç»Ÿå‰ªåˆ‡æ¿
vmap <leader>yy "+yy
vmap <leader>xx "+xx

" å¸®åŠ©æ–‡æ¡£
nnoremap <leader>h :vert help 

" æ‰“å¼€/å…³é—­ location listä»¥æŸ¥çœ‹aleçš„é”™è¯¯åˆ—è¡¨
nnoremap <leader>ee :lopen<CR>
nnoremap <leader>eq :lclose<CR>

" çª—å£æ§åˆ¶å¿«æ·é”®
" å‚ç›´åˆ†å±
nnoremap <leader>w/ :vs<CR>
" æ°´å¹³åˆ†å±
nnoremap <leader>w- :sv<CR>
" è°ƒæ•´å‚ç›´åˆ†å±å°ºå¯¸
nnoremap <leader>w[ :vertical resize+3<CR>
nnoremap <leader>w] :vertical resize-3<CR>
```

## vim-plugå®‰è£…

[vim-plug](https://github.com/junegunn/vim-plug)æ˜¯ä¸€ä¸ªé«˜æ•ˆçš„vimæ’ä»¶ç®¡ç†å™¨ã€‚å¾ˆå¤šäººå–œæ¬¢Vundleï¼Œä½†æ˜¯vim-plugæ›´åŠ è½»é‡ï¼Œè¿…é€Ÿã€‚å®ƒåˆ©ç”¨äº†vim8çš„autoloadï¼Œèƒ½å®ç°å¼‚æ­¥åŠ è½½æ’ä»¶ï¼Œå¤§å¤§æé«˜äº†vimçš„å¯åŠ¨é€Ÿåº¦ã€‚

ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š

```text
curl -fLo ~/.vim/autoload/plug.vim --create-dirs \
    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
```

åœ¨Linuxä¸‹ï¼Œå¯èƒ½å› ä¸ºDNSçš„åŸå› å¯¼è‡´`raw.githubusercontent.com`è¿™ä¸ªåŸŸåè®¿é—®ä¸äº†ã€‚å¯ä»¥ç›´æ¥å°†æ–‡ä»¶å¤åˆ¶ä¸‹æ¥æ”¾åˆ°`~/.vim/autoload/plug.vim`å³å¯ã€‚

## æ’ä»¶é…ç½®

å®‰è£…å¥½vim-plugä¹‹åï¼Œå°†æ‰€æœ‰æ’ä»¶åˆ—è¡¨åŠ åˆ°é…ç½®ä¸­ï¼š

```vim-script
call plug#begin('~/.vim/plugged')

  " æœç´¢æ’ä»¶
  Plug 'junegunn/fzf', { 'do': { -> fzf#install() } }
  Plug 'junegunn/fzf.vim'

  " æ–‡ä»¶æ ‘
  Plug 'scrooloose/nerdtree'
  Plug 'Xuyuanp/nerdtree-git-plugin'
  Plug 'jistr/vim-nerdtree-tabs'

  " çŠ¶æ€æ 
  Plug 'vim-airline/vim-airline'
  Plug 'vim-airline/vim-airline-themes'

  " ç¼–è¾‘æ’ä»¶
  Plug 'jiangmiao/auto-pairs'
  Plug 'majutsushi/tagbar'
  Plug 'junegunn/vim-easy-align'

  " å¿«é€Ÿæ³¨é‡Š
  Plug 'scrooloose/nerdcommenter'

  " ä»£ç è¡¥å…¨
  Plug 'neoclide/coc.nvim', {'branch': 'release'}

  " Git
  Plug 'tpope/vim-fugitive'
 
  " Markdownæ”¯æŒ
  Plug 'godlygeek/tabular'
  Plug 'plasticboy/vim-markdown'

  " ä¸»é¢˜
  Plug 'fioncat/vim-oceanicnext'

  " å¿«é€Ÿæ¸…é™¤buffer
  Plug 'fioncat/vim-bufclean'

  " vim-goçš„æç®€ç‰ˆï¼Œå»é™¤äº†goplsï¼Œä»¥åŠæ‰€æœ‰cocæ‹¥æœ‰çš„åŠŸèƒ½
  Plug 'fioncat/vim-minigo'

  " è¯­æ³•æ£€æŸ¥, æ²¡æœ‰ç”¨cocè‡ªå¸¦çš„æ˜¯å› ä¸ºæˆ‘è§‰å¾—å®ƒæ›´å¥½ç”¨
  " å¹¶ä¸”cocæ”¯æŒä»¥aleä½œä¸ºdiagnosticç»„ä»¶
  Plug 'w0rp/ale'

  " åœ¨sign-lineæ˜¾ç¤ºmarks
  Plug 'kshenoy/vim-signature'

call plug#end()
```

éšåé‡å¯vimï¼Œè¾“å…¥`:PlugInstall`å³å¯è¿›è¡Œå®‰è£…ã€‚

éšåï¼Œé’ˆå¯¹ä¸åŒçš„æ’ä»¶æœ‰ä¸€äº›ä¸åŒçš„ä¸ªæ€§åŒ–é…ç½®ï¼Œéœ€è¦åœ¨æ’ä»¶åˆ—è¡¨çš„åé¢åŠ ä¸Šã€‚

### oceanicnextä¸»é¢˜

ä½¿ç”¨ä»¥ä¸‹é…ç½®è®¾ç½®vimä¸»é¢˜ï¼š

```vim-script
" è®¾ç½®VIMä¸»é¢˜
colorscheme OceanicNext
set background=dark
set termguicolors
```

### Airline

ä¸€ä¸ªçŠ¶æ€æ æ’ä»¶ï¼Œå¯ä»¥å’ŒALEè”åŠ¨å®ç°åœ¨çŠ¶æ€æ å®æ—¶å±•ç¤ºä»£ç çš„errorå’Œwarningæ•°é‡ã€‚

oceanicnextä¸»é¢˜é‡Œé¢è‡ªå¸¦äº†airlineæ’ä»¶ï¼Œå› æ­¤vimå¯åŠ¨æ—¶airlineä¼šè‡ªåŠ¨ä½¿ç”¨oceanicnextçš„ä¸»é¢˜ã€‚

```vim-script
" æ˜¾ç¤ºçŠ¶æ€æ 
set laststatus=2

" ALE æ˜¾ç¤ºerror/warningæ•°é‡
let g:airline#extensions#ale#enabled = 1

" å›¾è¡¨æ›¿æ¢ï¼Œè¿™æ ·åº•å±‚çŠ¶æ€æ error/warningé‚£é‡Œå¯ä»¥å¥½çœ‹ä¸€äº›
let g:airline#extensions#ale#error_symbol = 'âœ— '
let g:airline#extensions#ale#warning_symbol = 'âš¡ '
```

### NERDTree

ä¸€ä¸ªvimå¿…è£…çš„æ–‡ä»¶æ ‘æ’ä»¶ã€‚é…ç½®å¦‚ä¸‹ï¼š

```vim-script
let g:NERDSpaceDelims=1
let g:NERDTreeMinimalUI=1

" æ‰“å¼€æ–‡ä»¶æ ‘
nnoremap <leader>tt :NERDTreeToggle<CR>
" åœ¨æ–‡ä»¶æ ‘æ‰“å¼€å½“å‰æ–‡ä»¶
nnoremap <leader>ff :NERDTreeFind<CR>
```

### tagbar

è¿™ä¸ªæ’ä»¶å¯ä»¥å±•ç¤ºå½“å‰ä»£ç çš„æ•´ä½“ç»“æ„ï¼Œå¹¶è¿›è¡Œå¿«é€Ÿè·³è½¬ã€‚éœ€è¦ctagsçš„æ”¯æŒï¼š

```text
$ brew install ctags
```

é…ç½®å¦‚ä¸‹ï¼š

```vim-script
let g:tagbar_type_go = {
    \ 'ctagstype' : 'go',
    \ 'kinds'     : [
        \ 'p:package',
        \ 'i:imports:1',
        \ 'c:constants',
        \ 'v:variables',
        \ 't:types',
        \ 'n:interfaces',
        \ 'w:fields',
        \ 'e:embedded',
        \ 'm:methods',
        \ 'r:constructor',
        \ 'f:functions'
    \ ],
    \ 'sro' : '.',
    \ 'kind2scope' : {
        \ 't' : 'ctype',
        \ 'n' : 'ntype'
    \ },
    \ 'scope2kind' : {
        \ 'ctype' : 't',
        \ 'ntype' : 'n'
    \ },
    \ 'ctagsbin'  : 'gotags',
    \ 'ctagsargs' : '-sort -silent'
\ }
" æ‰“å¼€tagbar
nnoremap <leader>tb :TagbarToggle<CR>
```

### coc.nvim

ä¸€ä¸ªæ¯”è¾ƒæ–°çš„è¡¥å…¨æ’ä»¶ï¼Œæˆ‘æ›¾ç»ä¹Ÿæ˜¯ä½¿ç”¨YouCompleteMeçš„ï¼Œä½†æ˜¯cocçš„åŠŸèƒ½å’Œä½¿ç”¨å®åœ¨æ¯”ycmå¥½å¾ˆå¤šã€‚cocæœ‰è‡ªå·±çš„æ’ä»¶åº“ï¼Œé‡‡ç”¨ç±»ä¼¼VsCodeçš„æ’ä»¶ç®¡ç†æ–¹å¼ï¼Œåœ¨ç‹¬ç«‹çš„jsonæ–‡ä»¶ä¸­é…ç½®æ’ä»¶ï¼Œå¹¶ä½¿ç”¨`:CocInstall`å•ç‹¬å®‰è£…æ’ä»¶ã€‚

cocéœ€è¦node.jsçš„æ”¯æŒï¼Œå¯ä»¥åˆ°å®˜ç½‘ä¸‹è½½å¯¹åº”ç³»ç»Ÿçš„å®‰è£…åŒ…è¿›è¡Œå®‰è£…ï¼Œå®‰è£…åè¾“å…¥ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ç‰ˆæœ¬ï¼š

```text
$ node -v
v14.17.0
```

cocéœ€è¦10.12ä»¥ä¸Šçš„nodeç‰ˆæœ¬ã€‚

åœ¨`.vimrc`ä¸­ï¼Œcocçš„é…ç½®å¦‚ä¸‹ï¼š

```vim-script
" ä»£ç è¡¥å…¨æ ·å¼ï¼Œè¯¦è§:help completeopt
set completeopt=menu,menuone

" ä»£ç è¡¥å…¨æ—¶ä½¿ç”¨TABå’Œs-TABè¿›è¡Œå¿«é€Ÿè¡¥å…¨
" è¿™ä¸ªè¡Œä¸ºå’Œycmçš„é»˜è®¤è¡Œä¸ºä¸€æ ·
inoremap <silent><expr> <TAB>
      \ pumvisible() ? "\<C-n>" :
      \ <SID>check_back_space() ? "\<TAB>" :
      \ coc#refresh()
inoremap <expr><S-TAB> pumvisible() ? "\<C-p>" : "\<C-h>"
function! s:check_back_space() abort
  let col = col('.') - 1
  return !col || getline('.')[col - 1]  =~# '\s'
endfunction

" <Enter> é€‰æ‹©è¡¥å…¨é¡¹
inoremap <silent><expr> <cr> pumvisible() ? coc#_select_confirm()
                              \: "\<C-g>u\<CR>\<c-r>=coc#on_enter()\<CR>"

function! s:show_documentation()
  if (index(['vim','help'], &filetype) >= 0)
    execute 'h '.expand('<cword>')
  elseif (coc#rpc#ready())
    call CocActionAsync('doHover')
  else
    execute '!' . &keywordprg . " " . expand('<cword>')
  endif
endfunction

" é«˜äº®å±•ç¤ºå…‰æ ‡æ‚¬æµ®çš„å¼•ç”¨
autocmd CursorHold * silent call CocActionAsync('highlight')

" GD - ä»£ç è·³è½¬
nmap <silent> gd <Plug>(coc-definition)
" GR - æ˜¾ç¤ºå˜é‡å¼•ç”¨
nmap <silent> gr <Plug>(coc-references)
" Kï¼šå±•ç¤ºæ–‡æ¡£
nnoremap <silent> K :call <SID>show_documentation()<CR>
" å˜é‡æ”¹å
nmap <leader>rn <Plug>(coc-rename)
" å°†é€‰ä¸­çš„ä»£ç æ ¼å¼åŒ–
xmap <leader>f  <Plug>(coc-format-selected)
nmap <leader>f  <Plug>(coc-format-selected)
```

é™¤æ­¤ä¹‹å¤–ï¼Œcocè¿˜éœ€è¦å•ç‹¬é…ç½®ï¼Œè¾“å…¥`:CocConfig`æ‰“å¼€é…ç½®æ–‡ä»¶ï¼Œè¾“å…¥ï¼š

```json
{
  "diagnostic.displayByAle": true,

  "languageserver": {
    "go": {
      "command": "gopls",
      "rootPatterns": ["go.mod"],
      "trace.server": "verbose",
      "filetypes": ["go"]
    }
  }
}
```

å› ä¸ºæ—¥å¸¸å¼€å‘è¿˜ç”¨åˆ°äº†Pythonï¼Œæ‰€ä»¥è¿˜éœ€è¦å®‰è£…Pythonçš„æ’ä»¶ï¼š`:CocInstall coc-python`ã€‚

cocå†…éƒ¨ä½¿ç”¨LSPä½œä¸ºlanguageserverï¼Œæ‰€ä»¥ä¸åŒè¯­è¨€éƒ½éœ€è¦å®‰è£…è‡ªå·±çš„LSPæ”¯æŒï¼š

Goè¯­è¨€(gopls)ï¼š

```text
$ go get -u golang.org/x/tools/gopls@latest
```

pythonè¯­è¨€(jedi)ï¼š

```vim-script
$ pip3 install jedi
```

å…¶å®ƒè¯­è¨€éœ€è¦è‡ªè¡Œå‚ç…§æ–‡æ¡£ã€‚

### ALE

ALEæ˜¯ä¸€ä¸ªç”¨äºä»£ç æ£€æŸ¥çš„æ’ä»¶ã€‚cocå¯ä»¥ä½¿ç”¨ALEä½œä¸ºä»£ç æ£€æŸ¥å™¨ï¼ˆæˆ‘åœ¨cocä¸­å·²ç»é…ç½®å¥½äº†ï¼‰ã€‚

ALEçš„é…ç½®å¦‚ä¸‹ï¼š

```vim-script
" é”™è¯¯é«˜äº®
let g:ale_set_highlights = 1
" å§‹ç»ˆæ˜¾ç¤ºsignè¡Œ
let g:ale_sign_column_always = 1

" signè¡Œerror/warningçš„æ ‡è¯†å­—ç¬¦
let g:ale_sign_error = '>>'
let g:ale_sign_warning = '>>'

" è®¾ç½®protobufçš„æ ¹è·¯å¾„
let g:ale_proto_protoc_gen_lint_options = '-I apidoc/proto'

" ä½¿ç”¨go buildè¿›è¡Œè¯­æ³•æ£€æŸ¥ï¼Œä»¥æ›´åŠ åŠæ—¶
" ä½¿ç”¨golintè¿›è¡Œä»£ç æ ¼å¼æ£€æŸ¥
let g:ale_linters = {
\   'go': ['go build', 'golint'],
\}

" è·³è½¬åˆ° ä¸‹ä¸€ä¸ª/ä¸Šä¸€ä¸ª é”™è¯¯
nnoremap <leader>en :ALENext -error<CR>
nnoremap <leader>ep :ALEPrevious -error<CR>

" è·³è½¬åˆ° ä¸‹ä¸€ä¸ª/ä¸Šä¸€ä¸ª è­¦å‘Š
nnoremap <leader>wn :ALENext -warning<CR>
nnoremap <leader>wp :ALEPrevious -warning<CR>
```

### mini-go

æœ¬æ¥æˆ‘æ˜¯ç›´æ¥ç”¨[vim-go](https://github.com/fatih/vim-go)ã€‚åæ¥å‘ç°è¿™ä¸ªæ’ä»¶å’Œcocä¸€èµ·ä½¿ç”¨æ—¶å­˜åœ¨ä¸€äº›é—®é¢˜ï¼š

- vim-goå’Œcocéƒ½ä¼šå¯åŠ¨è‡ªå·±çš„goplsï¼Œå¯¼è‡´æœ‰å¤šä¸ªgoplsåŒæ—¶è¿è¡Œï¼Œvimèµ„æºå ç”¨é«˜ã€‚
- vim-goæœ‰ä¸€äº›åŠŸèƒ½ï¼Œä¾‹å¦‚ä»£ç æ£€æŸ¥ï¼Œè·³è½¬ç­‰åœ¨cocä¸­å·²ç»æä¾›äº†ï¼ŒäºŒè€…ä¸€èµ·ä½¿ç”¨æ—¶æ˜¾å¾—æœ‰ç‚¹å¤šä½™ã€‚

å› æ­¤æˆ‘åŸºäºåŸæ¥çš„vim-goè¿›è¡Œäº†å¾ˆå¤šåˆ æ”¹ï¼Œåˆ å»äº†å¤§é‡goplsç›¸å…³è„šæœ¬ï¼Œä»…ä¿ç•™äº†ä¸€äº›cocç¼ºå¤±çš„åŠŸèƒ½ï¼Œä¾‹å¦‚`GoAddTag`ï¼Œ`GoFillStruct`ç­‰ã€‚å¹¶ä¸”ä¿ç•™äº†Goè¯­è¨€è¯­æ³•é«˜äº®ã€‚

é…ç½®å¦‚ä¸‹ï¼š

```vim-script
" Goè¯­æ³•é«˜äº®
let g:go_highlight_types = 1
let g:go_highlight_fields = 1
let g:go_highlight_functions = 1
let g:go_highlight_function_calls = 1
let g:go_highlight_operators = 1
let g:go_highlight_extra_types = 1
let g:go_highlight_methods = 1
let g:go_highlight_generate_tags = 1

" ä¸€äº›Go Tools
nnoremap gat :GoAddTags<CR>
nnoremap grt :GoRemoveTags<CR>
nnoremap gi  :GoImports<CR>
nnoremap gfs :GoFillStruct<CR>
```

Go toolséœ€è¦å•ç‹¬å®‰è£…ä¸€äº›äºŒè¿›åˆ¶ç¨‹åºï¼š

```text
go install github.com/klauspost/asmfmt/cmd/asmfmt@latest
go install github.com/go-delve/delve/cmd/dlv@latest
go install github.com/kisielk/errcheck@latest
go install github.com/davidrjenni/reftools/cmd/fillstruct@latest
go install github.com/rogpeppe/godef@latest
go install golang.org/x/tools/cmd/goimports@latest
go install golang.org/x/lint/golint@latest
go install github.com/golangci/golangci-lint/cmd/golangci-lint@latest
go install github.com/fatih/gomodifytags@latest
go install golang.org/x/tools/cmd/gorename@latest
go install github.com/jstemmer/gotags@latest
go install golang.org/x/tools/cmd/guru@latest
go install github.com/josharian/impl@latest
go install honnef.co/go/tools/cmd/keyify@latest
go install github.com/fatih/motion@latest
go install github.com/koron/iferr@latest
```

### fzf

fzfæ˜¯ä¸€ä¸ªå¼ºå¤§çš„æœç´¢æ’ä»¶ï¼Œå¯ä»¥æ›¿ä»£`ctrlp`ä½¿ç”¨ã€‚å¹¶ä¸”æ”¯æŒå„ç§ç»´åº¦çš„æœç´¢ã€‚

fzfæœ¬èº«æ˜¯ä¸€ä¸ªç”¨Goå†™çš„å‘½ä»¤è¡Œç¨‹åºï¼Œå®˜æ–¹åšäº†ä¸€ä¸ªvimæ’ä»¶ä»¥æ–¹ä¾¿åœ¨vimå†…éƒ¨æ‰§è¡Œå„ç§æœç´¢å‘½ä»¤ã€‚åœ¨mac/Linuxä¸‹å¯ä»¥å…ˆå•ç‹¬å®‰è£…fzfå‘½ä»¤ï¼š

```text
$ brew install fzf
```

å¯ä»¥è®©fzfå‘½ä»¤é…åˆvimä»¥å®ç°å¿«é€Ÿæœç´¢å¹¶æ‰“å¼€æ–‡ä»¶ï¼š

```bash
alias fvim='vim $(fzf --bind=tab:preview-down,btab:preview-up)'
```

å°†è¿™ä¸ªè¯­å¥åŠ åˆ°shell profileï¼ˆä¾‹å¦‚`.bashrc`ï¼Œ `.zshrc`ï¼‰ä¸­ï¼Œå¯ä»¥ä½¿ç”¨fvimå®ç°æœç´¢å¹¶ç”¨vimæ‰“å¼€æ–‡ä»¶ã€‚

åœ¨vimä¸­ï¼Œå¯¹fzfè¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š

```vim-script
" åœ¨ä¸‹æ–¹æ˜¾ç¤ºæœç´¢æ¡†
let g:fzf_layout = { 'down': '~40%' }
" ä¸æ˜¾ç¤ºpreview
let g:fzf_preview_window = []

" fzfæœç´¢æ¡†colorsé…ç½®ï¼Œè®©å…¶ç¬¦åˆå½“å‰ä¸»é¢˜
let g:fzf_colors =
\ { 'fg':      ['fg', 'Normal'],
  \ 'bg':      ['bg', 'Normal'],
  \ 'hl':      ['fg', 'Function'],
  \ 'fg+':     ['fg', 'CursorLine', 'CursorColumn', 'Normal'],
  \ 'bg+':     ['bg', 'Visual', 'CursorColumn'],
  \ 'hl+':     ['fg', 'Statement'],
  \ 'info':    ['fg', 'PreProc'],
  \ 'border':  ['fg', 'Ignore'],
  \ 'prompt':  ['fg', 'Conditional'],
  \ 'pointer': ['fg', 'Exception'],
  \ 'marker':  ['fg', 'Keyword'],
  \ 'spinner': ['fg', 'Label'],
  \ 'header':  ['fg', 'Comment'] }

" æœç´¢æ–‡ä»¶
nnoremap <leader>sf :Files<CR>
" æœç´¢å…¨å±€å†…å®¹
nnoremap <leader>sg :Ag<CR>
" æœç´¢å½“å‰æ–‡ä»¶å†…å®¹
nnoremap <leader>ss :Lines<CR>
" æœç´¢buffer
nnoremap <leader>sb :Buffers<CR>
```

